{"ast":null,"code":"var _jsxFileName = \"D:\\\\Settlr\\\\frontend\\\\src\\\\components\\\\SettleUp.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useExpense } from '../context/ExpenseContext';\nimport { TrendingUp, Users, DollarSign, ArrowRight, CheckCircle, Clock } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SettleUp = () => {\n  _s();\n  const {\n    currentUser,\n    groups,\n    fetchUserGroups\n  } = useExpense();\n  const [groupBalances, setGroupBalances] = useState({});\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  const [settlements, setSettlements] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (currentUser) {\n      fetchUserGroups(currentUser.id);\n    }\n  }, [currentUser, fetchUserGroups]);\n  useEffect(() => {\n    const loadBalances = async () => {\n      setLoading(true);\n      const balances = {};\n      for (const group of groups) {\n        try {\n          const groupBalance = await getGroupBalances(group.id);\n          balances[group.id] = groupBalance;\n        } catch (error) {\n          console.error('Error loading balance for group:', group.id);\n        }\n      }\n      setGroupBalances(balances);\n      setLoading(false);\n    };\n    if (groups.length > 0) {\n      loadBalances();\n    }\n  }, [groups]);\n\n  // Calculate optimal settlements for a group\n  const calculateSettlements = groupId => {\n    var _group$members;\n    const balance = groupBalances[groupId];\n    if (!balance || !balance.userBalances) return [];\n    const settlements = [];\n    const balances = {\n      ...balance.userBalances\n    };\n\n    // Get the group to access member information\n    const group = groups.find(g => g.id === groupId);\n    if (!group) return [];\n\n    // Create a mapping of user ID to user name for display\n    const userIdToName = {};\n    (_group$members = group.members) === null || _group$members === void 0 ? void 0 : _group$members.forEach(member => {\n      userIdToName[member.id] = member.name;\n    });\n\n    // Get people who owe money (positive balance) and who are owed money (negative balance)\n    const debtors = Object.entries(balances).filter(([_, amount]) => amount > 0);\n    const creditors = Object.entries(balances).filter(([_, amount]) => amount < 0);\n\n    // Calculate optimal settlements\n    for (let [debtorId, debtAmount] of debtors) {\n      for (let [creditorId, creditAmount] of creditors) {\n        if (debtAmount > 0 && creditAmount < 0) {\n          const settleAmount = Math.min(debtAmount, Math.abs(creditAmount));\n          if (settleAmount > 0) {\n            settlements.push({\n              fromId: debtorId,\n              toId: creditorId,\n              fromName: userIdToName[debtorId] || `User ${debtorId}`,\n              toName: userIdToName[creditorId] || `User ${creditorId}`,\n              amount: settleAmount,\n              groupId: groupId\n            });\n\n            // Update remaining balances\n            balances[debtorId] -= settleAmount;\n            balances[creditorId] += settleAmount;\n            debtAmount -= settleAmount;\n            creditAmount += settleAmount;\n          }\n        }\n      }\n    }\n    return settlements;\n  };\n\n  // Handle settlement recording\n  const handleSettlement = async settlement => {\n    try {\n      // For now, we'll create a settlement expense to record the payment\n      // In a full implementation, you'd want a dedicated settlements API\n      const settlementExpense = {\n        description: `Settlement: ${settlement.fromName} → ${settlement.toName}`,\n        amount: settlement.amount,\n        paidById: parseInt(settlement.toId),\n        // Person receiving gets \"paid\"\n        groupId: parseInt(settlement.groupId),\n        splitBetween: [parseInt(settlement.fromId)] // Only the payer \"owes\" this\n      };\n\n      // You could also add a settlement record or modify balances directly\n      console.log('Recording settlement:', settlementExpense);\n\n      // For now, just refresh the balances to simulate settlement\n      // In a real app, you'd call a settlement API here\n      alert(`Settlement recorded: ${settlement.fromName} paid ₹${settlement.amount.toFixed(2)} to ${settlement.toName}`);\n\n      // Refresh balances after settlement\n      const balances = {};\n      for (const group of groups) {\n        try {\n          const groupBalance = await getGroupBalances(group.id);\n          balances[group.id] = groupBalance;\n        } catch (error) {\n          console.error('Error loading balance for group:', group.id);\n        }\n      }\n      setGroupBalances(balances);\n    } catch (error) {\n      console.error('Error recording settlement:', error);\n      alert('Failed to record settlement. Please try again.');\n    }\n  };\n  const getUserBalance = (groupId, userId) => {\n    const balance = groupBalances[groupId];\n    if (!balance || !balance.userBalances) return 0;\n    return balance.userBalances[userId] || 0;\n  };\n  const getGroupSettlements = groupId => {\n    return calculateSettlements(groupId);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-6xl mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-lg p-8 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Loading groups...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 pt-16\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-bold text-gray-900\",\n            children: \"Settle Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Review balances and settle debts with your friends\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-100 p-3 rounded-full\",\n          children: /*#__PURE__*/_jsxDEV(TrendingUp, {\n            className: \"w-6 h-6 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-sm p-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-900 mb-4\",\n          children: \"Your Overall Balance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: (() => {\n            let totalOwed = 0;\n            let totalToReceive = 0;\n            let settledGroups = 0;\n            groups.forEach(group => {\n              const userBalance = getUserBalance(group.id, currentUser === null || currentUser === void 0 ? void 0 : currentUser.id); // Changed from currentUser?.name to currentUser?.id\n              console.log(`🔍 Group ${group.name} (ID: ${group.id}) - User ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.id} balance:`, userBalance);\n              if (userBalance > 0) {\n                totalOwed += userBalance;\n              } else if (userBalance < 0) {\n                totalToReceive += Math.abs(userBalance);\n              } else {\n                settledGroups++;\n              }\n            });\n            console.log('💰 Final SettleUp totals - Owed:', totalOwed, 'To Receive:', totalToReceive, 'Settled Groups:', settledGroups);\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-4 bg-red-50 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n                  className: \"w-8 h-8 text-red-600 mx-auto mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-red-600\",\n                  children: [\"\\u20B9\", totalOwed.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"You owe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-4 bg-green-50 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n                  className: \"w-8 h-8 text-green-600 mx-auto mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-green-600\",\n                  children: [\"\\u20B9\", totalToReceive.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"You're owed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-4 bg-blue-50 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                  className: \"w-8 h-8 text-blue-600 mx-auto mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-blue-600\",\n                  children: settledGroups\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"Settled groups\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: groups.map(group => {\n          var _group$members2, _group$members3;\n          const userBalance = getUserBalance(group.id, currentUser === null || currentUser === void 0 ? void 0 : currentUser.id);\n          const groupSettlements = getGroupSettlements(group.id);\n          const isSettled = Math.abs(userBalance) < 0.01;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-sm p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-purple-100 p-2 rounded-full\",\n                  children: /*#__PURE__*/_jsxDEV(Users, {\n                    className: \"w-5 h-5 text-purple-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"font-semibold text-gray-900\",\n                    children: group.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: [(_group$members2 = group.members) === null || _group$members2 === void 0 ? void 0 : _group$members2.length, \" members\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-right\",\n                children: isSettled ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2 text-green-600\",\n                  children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: \"Settled up\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `font-medium ${userBalance > 0 ? 'text-red-600' : 'text-green-600'}`,\n                  children: userBalance > 0 ? `You owe ₹${userBalance.toFixed(2)}` : `You're owed ₹${Math.abs(userBalance).toFixed(2)}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-gray-900 mb-2\",\n                children: \"Member Balances\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: (_group$members3 = group.members) === null || _group$members3 === void 0 ? void 0 : _group$members3.map(member => {\n                  const memberBalance = getUserBalance(group.id, member.id); // Changed from member.name to member.id\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between py-2 px-3 bg-gray-50 rounded\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium\",\n                      children: member.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `text-sm font-medium ${memberBalance > 0 ? 'text-red-600' : memberBalance < 0 ? 'text-green-600' : 'text-gray-600'}`,\n                      children: memberBalance > 0 ? `Owes ₹${memberBalance.toFixed(2)}` : memberBalance < 0 ? `Owed ₹${Math.abs(memberBalance).toFixed(2)}` : 'Settled'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 254,\n                      columnNumber: 27\n                    }, this)]\n                  }, member.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), groupSettlements.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-gray-900 mb-2\",\n                children: \"Suggested Settlements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: groupSettlements.map((settlement, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs font-bold text-blue-600\",\n                          children: settlement.fromName.charAt(0).toUpperCase()\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 279,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 278,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium text-gray-900\",\n                        children: settlement.fromName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n                      className: \"w-4 h-4 text-blue-600\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 285,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs font-bold text-green-600\",\n                          children: settlement.toName.charAt(0).toUpperCase()\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 288,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 287,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium text-gray-900\",\n                        children: settlement.toName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 292,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 286,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold text-blue-600 text-lg\",\n                      children: [\"\\u20B9\", settlement.amount.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors shadow-sm\",\n                      onClick: () => handleSettlement(settlement),\n                      children: \"Mark as Settled\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 27\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-yellow-700\",\n                  children: [\"\\uD83D\\uDCA1 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Tip:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 28\n                  }, this), \" These are optimized settlements to minimize the number of transactions needed.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this), isSettled && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-4 text-green-600\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"w-8 h-8 mx-auto mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: \"All settled up in this group!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this)]\n          }, group.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), groups.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12\",\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          className: \"w-16 h-16 text-gray-300 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 mb-2\",\n          children: \"No groups found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Join or create a group to start settling expenses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this);\n};\n_s(SettleUp, \"M3EqZKFj5dnLPrSjsnIB8fqqhO4=\", false, function () {\n  return [useExpense];\n});\n_c = SettleUp;\nexport default SettleUp;\nvar _c;\n$RefreshReg$(_c, \"SettleUp\");","map":{"version":3,"names":["React","useState","useEffect","useExpense","TrendingUp","Users","DollarSign","ArrowRight","CheckCircle","Clock","format","jsxDEV","_jsxDEV","Fragment","_Fragment","SettleUp","_s","currentUser","groups","fetchUserGroups","groupBalances","setGroupBalances","selectedGroup","setSelectedGroup","settlements","setSettlements","loading","setLoading","id","loadBalances","balances","group","groupBalance","getGroupBalances","error","console","length","calculateSettlements","groupId","_group$members","balance","userBalances","find","g","userIdToName","members","forEach","member","name","debtors","Object","entries","filter","_","amount","creditors","debtorId","debtAmount","creditorId","creditAmount","settleAmount","Math","min","abs","push","fromId","toId","fromName","toName","handleSettlement","settlement","settlementExpense","description","paidById","parseInt","splitBetween","log","alert","toFixed","getUserBalance","userId","getGroupSettlements","className","children","fileName","_jsxFileName","lineNumber","columnNumber","totalOwed","totalToReceive","settledGroups","userBalance","map","_group$members2","_group$members3","groupSettlements","isSettled","memberBalance","index","charAt","toUpperCase","onClick","_c","$RefreshReg$"],"sources":["D:/Settlr/frontend/src/components/SettleUp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useExpense } from '../context/ExpenseContext';\r\nimport { TrendingUp, Users, DollarSign, ArrowRight, CheckCircle, Clock } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\n\r\nconst SettleUp = () => {\r\n  const { currentUser, groups, fetchUserGroups } = useExpense();\r\n  const [groupBalances, setGroupBalances] = useState({});\r\n  const [selectedGroup, setSelectedGroup] = useState(null);\r\n  const [settlements, setSettlements] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      fetchUserGroups(currentUser.id);\r\n    }\r\n  }, [currentUser, fetchUserGroups]);\r\n\r\n  useEffect(() => {\r\n    const loadBalances = async () => {\r\n      setLoading(true);\r\n      const balances = {};\r\n      for (const group of groups) {\r\n        try {\r\n          const groupBalance = await getGroupBalances(group.id);\r\n          balances[group.id] = groupBalance;\r\n        } catch (error) {\r\n          console.error('Error loading balance for group:', group.id);\r\n        }\r\n      }\r\n      setGroupBalances(balances);\r\n      setLoading(false);\r\n    };\r\n\r\n    if (groups.length > 0) {\r\n      loadBalances();\r\n    }\r\n  }, [groups]);\r\n\r\n  // Calculate optimal settlements for a group\r\n  const calculateSettlements = (groupId) => {\r\n    const balance = groupBalances[groupId];\r\n    if (!balance || !balance.userBalances) return [];\r\n\r\n    const settlements = [];\r\n    const balances = { ...balance.userBalances };\r\n\r\n    // Get the group to access member information\r\n    const group = groups.find(g => g.id === groupId);\r\n    if (!group) return [];\r\n\r\n    // Create a mapping of user ID to user name for display\r\n    const userIdToName = {};\r\n    group.members?.forEach(member => {\r\n      userIdToName[member.id] = member.name;\r\n    });\r\n\r\n    // Get people who owe money (positive balance) and who are owed money (negative balance)\r\n    const debtors = Object.entries(balances).filter(([_, amount]) => amount > 0);\r\n    const creditors = Object.entries(balances).filter(([_, amount]) => amount < 0);\r\n\r\n    // Calculate optimal settlements\r\n    for (let [debtorId, debtAmount] of debtors) {\r\n      for (let [creditorId, creditAmount] of creditors) {\r\n        if (debtAmount > 0 && creditAmount < 0) {\r\n          const settleAmount = Math.min(debtAmount, Math.abs(creditAmount));\r\n          if (settleAmount > 0) {\r\n            settlements.push({\r\n              fromId: debtorId,\r\n              toId: creditorId,\r\n              fromName: userIdToName[debtorId] || `User ${debtorId}`,\r\n              toName: userIdToName[creditorId] || `User ${creditorId}`,\r\n              amount: settleAmount,\r\n              groupId: groupId\r\n            });\r\n\r\n            // Update remaining balances\r\n            balances[debtorId] -= settleAmount;\r\n            balances[creditorId] += settleAmount;\r\n            debtAmount -= settleAmount;\r\n            creditAmount += settleAmount;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return settlements;\r\n  };\r\n\r\n  // Handle settlement recording\r\n  const handleSettlement = async (settlement) => {\r\n    try {\r\n      // For now, we'll create a settlement expense to record the payment\r\n      // In a full implementation, you'd want a dedicated settlements API\r\n      const settlementExpense = {\r\n        description: `Settlement: ${settlement.fromName} → ${settlement.toName}`,\r\n        amount: settlement.amount,\r\n        paidById: parseInt(settlement.toId), // Person receiving gets \"paid\"\r\n        groupId: parseInt(settlement.groupId),\r\n        splitBetween: [parseInt(settlement.fromId)] // Only the payer \"owes\" this\r\n      };\r\n\r\n      // You could also add a settlement record or modify balances directly\r\n      console.log('Recording settlement:', settlementExpense);\r\n\r\n      // For now, just refresh the balances to simulate settlement\r\n      // In a real app, you'd call a settlement API here\r\n      alert(`Settlement recorded: ${settlement.fromName} paid ₹${settlement.amount.toFixed(2)} to ${settlement.toName}`);\r\n\r\n      // Refresh balances after settlement\r\n      const balances = {};\r\n      for (const group of groups) {\r\n        try {\r\n          const groupBalance = await getGroupBalances(group.id);\r\n          balances[group.id] = groupBalance;\r\n        } catch (error) {\r\n          console.error('Error loading balance for group:', group.id);\r\n        }\r\n      }\r\n      setGroupBalances(balances);\r\n\r\n    } catch (error) {\r\n      console.error('Error recording settlement:', error);\r\n      alert('Failed to record settlement. Please try again.');\r\n    }\r\n  };\r\n\r\n  const getUserBalance = (groupId, userId) => {\r\n    const balance = groupBalances[groupId];\r\n    if (!balance || !balance.userBalances) return 0;\r\n    return balance.userBalances[userId] || 0;\r\n  };\r\n\r\n  const getGroupSettlements = (groupId) => {\r\n    return calculateSettlements(groupId);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <div className=\"bg-white rounded-xl shadow-lg p-8 text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\r\n            <p className=\"text-gray-600\">Loading groups...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 pt-16\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Settle Up</h1>\r\n            <p className=\"text-gray-600\">Review balances and settle debts with your friends</p>\r\n          </div>\r\n          <div className=\"bg-green-100 p-3 rounded-full\">\r\n            <TrendingUp className=\"w-6 h-6 text-green-600\" />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Overall Summary */}\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Your Overall Balance</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            {(() => {\r\n              let totalOwed = 0;\r\n              let totalToReceive = 0;\r\n              let settledGroups = 0;\r\n\r\n              groups.forEach(group => {\r\n                const userBalance = getUserBalance(group.id, currentUser?.id); // Changed from currentUser?.name to currentUser?.id\r\n                console.log(`🔍 Group ${group.name} (ID: ${group.id}) - User ${currentUser?.id} balance:`, userBalance);\r\n\r\n                if (userBalance > 0) {\r\n                  totalOwed += userBalance;\r\n                } else if (userBalance < 0) {\r\n                  totalToReceive += Math.abs(userBalance);\r\n                } else {\r\n                  settledGroups++;\r\n                }\r\n              });\r\n\r\n              console.log('💰 Final SettleUp totals - Owed:', totalOwed, 'To Receive:', totalToReceive, 'Settled Groups:', settledGroups);\r\n\r\n              return (\r\n                <>\r\n                  <div className=\"text-center p-4 bg-red-50 rounded-lg\">\r\n                    <DollarSign className=\"w-8 h-8 text-red-600 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-red-600\">₹{totalOwed.toFixed(2)}</div>\r\n                    <div className=\"text-sm text-gray-600\">You owe</div>\r\n                  </div>\r\n                  <div className=\"text-center p-4 bg-green-50 rounded-lg\">\r\n                    <DollarSign className=\"w-8 h-8 text-green-600 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-green-600\">₹{totalToReceive.toFixed(2)}</div>\r\n                    <div className=\"text-sm text-gray-600\">You're owed</div>\r\n                  </div>\r\n                  <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\r\n                    <CheckCircle className=\"w-8 h-8 text-blue-600 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-blue-600\">{settledGroups}</div>\r\n                    <div className=\"text-sm text-gray-600\">Settled groups</div>\r\n                  </div>\r\n                </>\r\n              );\r\n            })()}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Groups List */}\r\n        <div className=\"space-y-6\">\r\n          {groups.map(group => {\r\n            const userBalance = getUserBalance(group.id, currentUser?.id);\r\n            const groupSettlements = getGroupSettlements(group.id);\r\n            const isSettled = Math.abs(userBalance) < 0.01;\r\n\r\n            return (\r\n              <div key={group.id} className=\"bg-white rounded-lg shadow-sm p-6\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"bg-purple-100 p-2 rounded-full\">\r\n                      <Users className=\"w-5 h-5 text-purple-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-gray-900\">{group.name}</h3>\r\n                      <p className=\"text-sm text-gray-500\">{group.members?.length} members</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    {isSettled ? (\r\n                      <div className=\"flex items-center space-x-2 text-green-600\">\r\n                        <CheckCircle className=\"w-5 h-5\" />\r\n                        <span className=\"font-medium\">Settled up</span>\r\n                      </div>\r\n                    ) : (\r\n                      <div className={`font-medium ${userBalance > 0 ? 'text-red-600' : 'text-green-600'}`}>\r\n                        {userBalance > 0 ? `You owe ₹${userBalance.toFixed(2)}` : `You're owed ₹${Math.abs(userBalance).toFixed(2)}`}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Group Members Balances */}\r\n                <div className=\"mb-4\">\r\n                  <h4 className=\"font-medium text-gray-900 mb-2\">Member Balances</h4>\r\n                  <div className=\"space-y-2\">\r\n                    {group.members?.map(member => {\r\n                      const memberBalance = getUserBalance(group.id, member.id); // Changed from member.name to member.id\r\n                      return (\r\n                        <div key={member.id} className=\"flex items-center justify-between py-2 px-3 bg-gray-50 rounded\">\r\n                          <span className=\"text-sm font-medium\">{member.name}</span>\r\n                          <span className={`text-sm font-medium ${\r\n                            memberBalance > 0 ? 'text-red-600' :\r\n                            memberBalance < 0 ? 'text-green-600' :\r\n                            'text-gray-600'\r\n                          }`}>\r\n                            {memberBalance > 0 ? `Owes ₹${memberBalance.toFixed(2)}` :\r\n                             memberBalance < 0 ? `Owed ₹${Math.abs(memberBalance).toFixed(2)}` :\r\n                             'Settled'}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Suggested Settlements */}\r\n                {groupSettlements.length > 0 && (\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Suggested Settlements</h4>\r\n                    <div className=\"space-y-2\">\r\n                      {groupSettlements.map((settlement, index) => (\r\n                        <div key={index} className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400\">\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                                <span className=\"text-xs font-bold text-blue-600\">\r\n                                  {settlement.fromName.charAt(0).toUpperCase()}\r\n                                </span>\r\n                              </div>\r\n                              <span className=\"font-medium text-gray-900\">{settlement.fromName}</span>\r\n                            </div>\r\n                            <ArrowRight className=\"w-4 h-4 text-blue-600\" />\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\r\n                                <span className=\"text-xs font-bold text-green-600\">\r\n                                  {settlement.toName.charAt(0).toUpperCase()}\r\n                                </span>\r\n                              </div>\r\n                              <span className=\"font-medium text-gray-900\">{settlement.toName}</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <span className=\"font-bold text-blue-600 text-lg\">₹{settlement.amount.toFixed(2)}</span>\r\n                            <button\r\n                              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors shadow-sm\"\r\n                              onClick={() => handleSettlement(settlement)}\r\n                            >\r\n                              Mark as Settled\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"mt-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\r\n                      <p className=\"text-sm text-yellow-700\">\r\n                        💡 <strong>Tip:</strong> These are optimized settlements to minimize the number of transactions needed.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {isSettled && (\r\n                  <div className=\"text-center py-4 text-green-600\">\r\n                    <CheckCircle className=\"w-8 h-8 mx-auto mb-2\" />\r\n                    <p className=\"font-medium\">All settled up in this group!</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {groups.length === 0 && (\r\n          <div className=\"text-center py-12\">\r\n            <Users className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No groups found</h3>\r\n            <p className=\"text-gray-600\">Join or create a group to start settling expenses</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettleUp;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}